--RF11 - ASIGNAR CITA DE VACUNACIÓN A UN CIUDADANO
SELECT IDPUNTOVACUNACION, ESTADOACTUAL
FROM CIUDADANOS
WHERE ID=1;

SELECT CUPOMAXIMO, MAXCIUDADANOSPORDIA
FROM PUNTO_VACUNACION
WHERE ID=1;

SELECT COUNT(*)
FROM CITAS
WHERE IDPUNTOVACUNACION=1
    AND FECHAYHORA
        BETWEEN TO_TIMESTAMP('2021-04-11 06:14:00.0', 'YYYY-MM-DD HH24:MI:SS.FF')
        AND TO_TIMESTAMP('2021-04-11 23:59:00.0', 'YYYY-MM-DD HH24:MI:SS.FF');

SELECT COUNT(*)
FROM CITAS
WHERE IDPUNTOVACUNACION=1
    AND FECHAYHORA
        BETWEEN TO_TIMESTAMP('2021-04-11 06:14:00.0', 'YYYY-MM-DD HH24:MI:SS.FF')
        AND TO_TIMESTAMP('2021-04-11 6:34:00.0', 'YYYY-MM-DD HH24:MI:SS.FF'); 

INSERT INTO CITAS (ID, FECHAYHORA, DURACIONCITA, ESTADOCITA, IDCIUDADANO, IDPUNTOVACUNACION)
VALUES (21, TO_TIMESTAMP('2021-04-11 06:14:00.0', 'YYYY-MM-DD HH24:MI:SS.FF'),30,'AGENDADA',1,2);

UPDATE CIUDADANOS
SET ESTADOACTUAL=6
WHERE ID=1;

INSERT INTO ESTADO_PROCESO (ID, ESTADO, FECHA_CAMBIO, COMENTARIO_DESCRIPCION, ID_CIUDADANO)
VALUES (31, 6, DATE '2021-05-07', 'Cita asignada a Amanda Ortega', 1);

COMMIT;

